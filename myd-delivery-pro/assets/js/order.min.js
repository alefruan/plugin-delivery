(()=>{var e={566:()=>{function e(){const e=this.dataset.maxLimit;if(e){const t=this.dataset.type,n=this.classList;document.querySelectorAll("input."+n[0]+'[data-type="'+t+'"]:checked').length>e&&(this.checked=!1)}}function t(e){e.addEventListener("click",(()=>{let t=document.getElementById("input-delivery-zipcode"),n=document.getElementById("input-delivery-street-name"),o=document.getElementById("input-delivery-address-number"),r=document.getElementById("input-delivery-neighborhood"),i=document.getElementById("input-in-store-table");"delivery"==e.dataset.type&&(n&&n.setAttribute("required","required"),i&&i.removeAttribute("required","required"),null!=o&&o.setAttribute("required","required"),null!=r&&r.setAttribute("required","required"),null!=t&&t.setAttribute("required","required")),"take-away"==e.dataset.type&&(n&&n.removeAttribute("required","required"),i&&i.removeAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=o&&o.removeAttribute("required","required"),null!=r&&r.removeAttribute("required","required")),"order-in-store"==e.dataset.type&&(n&&n.removeAttribute("required","required"),i&&i.setAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=o&&o.removeAttribute("required","required"),null!=r&&r.removeAttribute("required","required")),document.querySelector(".myd-cart__checkout-option--active").classList.remove("myd-cart__checkout-option--active"),e.classList.add("myd-cart__checkout-option--active"),document.querySelectorAll(".myd-cart__checkout-field-group--active").forEach((e=>{e.classList.remove("myd-cart__checkout-field-group--active")})),document.querySelectorAll(e.dataset.content).forEach((e=>{e.classList.add("myd-cart__checkout-field-group--active")})),window.MydOrder.type=e.dataset.type}))}function n(){document.querySelector(".myd-checkout").classList.toggle("myd-checkout--open"),document.body.classList.toggle("myd-cart-open")}function o(){const e=document.querySelector(".myd-cart__nav--active");if("none"!=e.dataset.back){e.classList.remove("myd-cart__nav--active"),document.querySelector("."+e.dataset.tabContent).classList.remove("myd-cart__content--active");let t=document.querySelector("."+e.dataset.back);t.classList.add("myd-cart__nav--active"),document.querySelector("."+t.dataset.tabContent).classList.add("myd-cart__content--active")}}function r(){if(!window.MydCart.items.length)return void window.Myd.notificationBar("error",mydStoreInfo.messages.cartEmpty);if(!1===window.MydCart.checkStoreTime())return;if(!1===window.MydCart.checkMinimumPurchase())return;const e=document.querySelector(".myd-cart__nav--active");if("myd-cart__nav-payment"!==e.dataset.next){if("none"!=e.dataset.next&&"myd-cart__finished"!==e.dataset.next&&i(),"myd-cart__finished"===e.dataset.next){if(!1===window.Myd.validateInputs("payment"))return;window.Myd.newEvent("MydCheckoutPlacePayment",{})}}else window.Myd.newEvent("MydCheckoutPlaceOrder",{})}function i(){const e=document.querySelector(".myd-cart__nav--active");if(!e)return;e.classList.remove("myd-cart__nav--active"),document.querySelector("."+e.dataset.tabContent).classList.remove("myd-cart__content--active");const t=document.querySelector("."+e.dataset.next);t&&(t.classList.add("myd-cart__nav--active"),document.querySelector("."+t.dataset.tabContent).classList.add("myd-cart__content--active"))}function d(){const e=document.getElementById("input-payment-change"),t=document.getElementById("label-payment-change");"Cash"===this.value||"Dinheiro"===this.value?(e.style.display="block",e.style.visibility="visible",e.setAttribute("required","required"),t.style.display="block",t.style.visibility="visible"):(e.style.display="none",e.style.visibility="hidden",e.removeAttribute("required","required"),t.style.display="none",t.style.visibility="hidden")}document.addEventListener("DOMContentLoaded",(function(){if(void 0===document.querySelector(".myd-product-list"))return;const i=document.querySelector(".myd-cart__nav-close");i&&i.addEventListener("click",n);const a=document.querySelector(".myd-cart__nav-back");a&&a.addEventListener("click",o);const s=document.querySelectorAll(".myd-cart__checkout-option");1!==s.length&&2!==s.length||(s[0].classList.add("myd-cart__checkout-option--active"),function(e){let t=document.getElementById("input-delivery-zipcode"),n=document.getElementById("input-delivery-street-name"),o=document.getElementById("input-delivery-address-number"),r=(document.getElementById("input-delivery-comp"),document.getElementById("input-delivery-neighborhood")),i=document.getElementById("input-in-store-table");"delivery"==e.dataset.type&&(n&&n.setAttribute("required","required"),i&&i.removeAttribute("required","required"),null!=o&&o.setAttribute("required","required"),null!=r&&r.setAttribute("required","required"),null!=t&&t.setAttribute("required","required")),"take-away"==e.dataset.type&&(n&&n.removeAttribute("required","required"),i&&i.removeAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=o&&o.removeAttribute("required","required"),null!=r&&r.removeAttribute("required","required")),"order-in-store"==e.dataset.type&&(n&&n.removeAttribute("required","required"),i&&i.setAttribute("required","required"),null!=t&&t.removeAttribute("required","required"),null!=o&&o.removeAttribute("required","required"),null!=r&&r.removeAttribute("required","required")),document.querySelectorAll(".myd-cart__checkout-field-group--active").forEach((e=>{e.classList.remove("myd-cart__checkout-field-group--active")})),document.querySelectorAll(e.dataset.content).forEach((e=>{e.classList.add("myd-cart__checkout-field-group--active")}))}(s[0])),s.forEach(t),window.MydCheckout.elements.nextButton.addEventListener("click",r);const c=document.querySelectorAll(".fdm-add-to-cart-popup");c.length>0&&c.forEach((e=>{e.addEventListener("click",(()=>{const t=e.querySelector(".myd-add-to-cart-button__text");t&&(t.innerHTML=window.Myd.getLoadingAnimation()),window.MydCart.addItem(e.id),t&&(t.innerHTML=e.dataset.text)}))}));const l=document.querySelectorAll(".fdm-popup-product-content .option_prod_exta");l.length>0&&l.forEach((t=>{t.addEventListener("change",e)}));const u=document.querySelectorAll(".myd-cart__payment-input-option");u.length>0&&u.forEach((e=>{e.addEventListener("change",d)}));const m=document.getElementById("myd-content-filter__search-icon"),y=document.getElementById("myd-content-filter__search-input");window.screen.width<768&&m&&m.addEventListener("click",(e=>{y&&y.classList.toggle("myd-content-filter-show")}));const p=document.querySelectorAll(".myd-product-item .myd-product-item__title"),h=document.getElementById("myd-search-products"),g=document.querySelectorAll(".myd-product-list__title"),v=document.querySelectorAll(".myd-product-item__divider");h&&h.addEventListener("keyup",(e=>{var t,n;""!=h.value?(g.forEach((e=>{e.classList.add("myd-item-hide")})),v.forEach((e=>{e.classList.add("myd-item-hide")})),t=p,n=h.value,t.forEach((e=>{e.innerText.toLowerCase().includes(n.toLowerCase())?e.closest(".myd-product-item").classList.remove("myd-item-hide"):e.closest(".myd-product-item").classList.add("myd-item-hide")}))):p.forEach((e=>{e.closest(".myd-product-item").classList.remove("myd-item-hide"),g.forEach((e=>{e.classList.remove("myd-item-hide")})),v.forEach((e=>{e.classList.remove("myd-item-hide")}))}))}));const f=document.querySelectorAll(".myd-product-popup__img"),w=document.getElementById("myd-image-preview-image"),_=document.getElementById("myd-image-preview-popup");f.length>0&&w&&_&&(f.forEach((e=>{e.addEventListener("click",(t=>{w.src=e.dataset.image,_.classList.toggle("myd-hide-element")}))})),_.addEventListener("click",(e=>{_.classList.toggle("myd-hide-element")})),w.addEventListener("click",(e=>{e.stopPropagation()})));const E=document.getElementById("myd-image-preview-popup-close");E&&E.addEventListener("click",(()=>{_.classList.toggle("myd-hide-element")}));const S=document.querySelectorAll(".myd-product-item");S.length>0&&S.forEach((e=>{e.addEventListener("click",(()=>{const t=document.getElementById(`popup-${e.dataset.id}`);t&&t.classList.toggle("myd-hide-element")}))}));const b=document.querySelectorAll(".fdm-popup-close-btn");b.length>0&&b.forEach((e=>{e.addEventListener("click",(()=>{e.parentElement.parentElement.parentElement.classList.toggle("myd-hide-element")}))}));const q=document.getElementById("myd-checkout");q&&q.addEventListener("click",n);const I=document.getElementById("myd-cart");I&&I.addEventListener("click",(e=>{e.stopPropagation()}))})),window.addEventListener("MydDraftOrderCreated",(()=>{window.MydCheckout.elements.nextButtonText.innerHTML=window.MydCheckout.elements.nextButtonText.dataset.text,i()}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{"use strict";var e=(e,t,n)=>new Promise(((o,r)=>{var i=e=>{try{a(n.next(e))}catch(e){r(e)}},d=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,d);a((n=n.apply(e,t)).next())}));class t{constructor(){this.type=null,this.method=null,this.details=null,this.change=null,this.init()}init(){"complete"===document.readyState?(this.managePaymentOptionsTab(),this.setDefaultPaymentType()):window.addEventListener("load",this.init.bind(this))}managePaymentOptionsTab(){const e=document.querySelectorAll(".myd-cart__payment-options-container > details");e.length&&e.forEach((t=>{t.addEventListener("click",(()=>{this.setPaymentDetails(t.dataset.type),e.forEach((e=>{e!==t&&e.removeAttribute("open")}))}))}))}setDefaultPaymentType(){const e=document.querySelector(".myd-cart__payment-options-container > details[open]");e&&this.setPaymentDetails(e.dataset.type)}setPaymentDetails(e){this.type=e}get(){return{type:this.type,method:this.method,details:this.details,change:this.change}}update(){if("upon-delivery"===this.type){const e=document.querySelector(".myd-cart__payment-input-option:checked");e&&(this.method=e.value);const t=document.getElementById("input-payment-change");if(t&&t.value&&t.required)return void(this.change=t.value);this.change=null}}}var o=(e,t,n)=>new Promise(((o,r)=>{var i=e=>{try{a(n.next(e))}catch(e){r(e)}},d=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,d);a((n=n.apply(e,t)).next())}));class r{constructor(){this.status=null,this.price=null,this.table=null,this.method=null,this.error=null,this.init()}init(){"complete"===document.readyState?this.method=mydStoreInfo.deliveryShipping.method:window.addEventListener("load",this.init.bind(this))}get(){return{method:this.method,status:this.status,price:this.price,table:this.table}}SetGoogleMapsApi(){const e=document.getElementById("input-delivery-autocomplete-address");if(!e)return;const t=new google.maps.places.Autocomplete(e,{fields:["formatted_address","geometry","address_components"],strictBounds:!1,types:["address"]});t.addListener("place_changed",(()=>{const e=t.getPlace();if(!e.geometry||!e.geometry.location||!e.address_components)return void window.alert("No details available for input: '"+e.name+"'");const n=document.getElementsByName("input-delivery-formated-address"),o=document.getElementsByName("input-delivery-latitude"),r=document.getElementsByName("input-delivery-longitude");if(o&&r&&n&&(n[0].value=e.formatted_address,o[0].value=e.geometry.location.lat(),r[0].value=e.geometry.location.lng()),e.address_components.length>0){const t=e.address_components.filter((e=>e.types.includes("street_number"))),n=e.address_components.filter((e=>e.types.includes("postal_code"))),o=e.address_components.filter((e=>e.types.includes("route"))),r=e.address_components.filter((e=>e.types.includes("sublocality_level_1"))),i=document.getElementById("input-delivery-address-number");i&&(i.value=t.length>0?t[0].long_name:"");const d=document.getElementById("input-delivery-zipcode");d&&(d.value=n.length>0?n[0].long_name:"00000000");const a=document.getElementById("input-delivery-street-name");a&&(a.value=o.length>0?o[0].long_name:"");const s=document.getElementById("input-delivery-neighborhood");s&&(s.value=r.length>0?r[0].long_name:"")}}))}getPriceByDistance(){return o(this,null,(function*(){const e=mydStoreInfo.deliveryShipping.options,t=document.getElementsByName("input-delivery-latitude"),n=document.getElementsByName("input-delivery-longitude");if(!t||!n)return console.error("Missed latitude and longitude to destination"),!1;const o={origins:[{lat:Number(e.originAddress.latitude),lng:Number(e.originAddress.longitude)}],destinations:[{lat:Number(t[0].value),lng:Number(n[0].value)}],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},r=new google.maps.DistanceMatrixService,i=yield r.getDistanceMatrix(o);if(!i)return i;const d=i.rows[0].elements[0].distance.value,a=Object.values(e.options).filter((e=>{const t=1e3*e.from,n=1e3*e.to;return t<=d&&n>=d}));return a.length>0?a[0].price:"out-of-area"}))}getPriceByFixedPerNeighborhood(){return mydStoreInfo.deliveryShipping.options.price}getPriceByNeighborhood(){const e=mydStoreInfo.deliveryShipping.options,t=document.getElementById("input-delivery-neighborhood").value,n=[];return Object.keys(e.options).forEach((o=>{e.options[o].from===t&&n.push(e.options[o].price)})),n[0]}getPriceByCepRange(){const e=mydStoreInfo.deliveryShipping.options,t=parseInt(document.getElementById("input-delivery-zipcode").value),n=[];return Object.keys(e.options).forEach((o=>{t>=e.options[o].from&&t<=e.options[o].to&&n.push(e.options[o].price)})),n[0]}getPriceByFixedPerCep(){return mydStoreInfo.deliveryShipping.options.price}validateZipcodeShipping(e){if("delivery"===e&&("per-cep-range"===this.method||"fixed-per-cep"===this.method)){let e=mydStoreInfo.deliveryShipping.options,t=parseInt(document.getElementById("input-delivery-zipcode").value),n=[];if(Object.keys(e.options).forEach((o=>{t>=e.options[o].from&&t<=e.options[o].to&&n.push(!0)})),0===n.length)return!1}}calculate(){if("delivery"===window.MydOrder.type){if("per-distance"===this.method)return this.getPriceByDistance();if("fixed-per-neighborhood"===this.method)return this.getPriceByFixedPerNeighborhood();if("per-neighborhood"===this.method)return this.getPriceByNeighborhood();if("per-cep-range"===this.method)return this.getPriceByCepRange();if("fixed-per-cep"===this.method)return this.getPriceByFixedPerCep()}return 0}update(){return o(this,null,(function*(){var e;this.table="order-in-store"===window.MydOrder.type?null==(e=window.MydCheckout.inputs.table)?void 0:e.value:null,this.price=yield this.calculate()}))}}class i{constructor(){this.id=null,this.name=null,this.phone=null,this.cpf=null,this.address={street:null,number:null,complement:null,neighborhood:null,zipcode:null,longitude:null,latitude:null,formatedAddress:null,distance:null}}get(){return{id:this.id,name:this.name,phone:this.phone,cpf:this.cpf,address:this.address}}update(){var e,t,n,o,r,i,d;this.name=null==(e=window.MydCheckout.inputs.name)?void 0:e.value,this.phone=null==(t=window.MydCheckout.inputs.phone)?void 0:t.value,"delivery"===window.MydOrder.type&&(this.address.street=(null==(n=window.MydCheckout.inputs.street)?void 0:n.value)||null,this.address.number=null==(o=window.MydCheckout.inputs.streetNumber)?void 0:o.value,this.address.complement=null==(r=window.MydCheckout.inputs.addressComplement)?void 0:r.value,this.address.neighborhood=null==(i=window.MydCheckout.inputs.neighborhood)?void 0:i.value,this.address.zipcode=null==(d=window.MydCheckout.inputs.zipcode)?void 0:d.value)}}class d{constructor(){this.id=null,this.code=null,this.type=null}get(){return{id:this.id,code:this.code,type:this.type}}update(){var e;this.code=(null==(e=window.MydCheckout.inputs.couponCode)?void 0:e.value)||null}}var a=(e,t,n)=>new Promise(((o,r)=>{var i=e=>{try{a(n.next(e))}catch(e){r(e)}},d=e=>{try{a(n.throw(e))}catch(e){r(e)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(i,d);a((n=n.apply(e,t)).next())}));n(566),window.Myd=new class{constructor(){this.init()}init(){"complete"===document.readyState?(this.setProductChangeQuantity(),this.setCategoryTagsFilter()):window.addEventListener("load",this.init.bind(this))}hideProductPopup(){const e=document.querySelector(".fdm-popup-product-init:not(.myd-hide-element)");e&&e.classList.add("myd-hide-element")}resetAllProcuctExtraCheckbox(){const e=document.querySelectorAll('input[type="checkbox"]');e&&e.forEach((e=>{e.checked=!1}))}resetAllProductSelectQty(){const e=document.querySelectorAll(".fmd-item-qty");e&&e.forEach((e=>{e.value="1"}))}newEvent(e="MydEvent",t={}){const n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0,composed:!1});window.dispatchEvent(n)}getLoadingAnimation(){const e=document.getElementById("myd-template-loading");if(e)return e.innerHTML}addLoadingAnimation(e){const t=document.querySelector(e);t&&(t.innerHTML=this.getLoadingAnimation())}removeLoadingAnimation(e){const t=document.querySelector(e);t&&(t.innerHTML=t.dataset.text)}notificationBar(e,t){if(!1===mydStoreInfo.messages.template){const e=document.getElementById("myd-popup-notification");mydStoreInfo.messages.template=e}mydStoreInfo.messages.template.querySelector(".myd-popup-notification__message").innerHTML=t,"success"==e&&(mydStoreInfo.messages.template.style.background="#35a575"),"error"==e&&(mydStoreInfo.messages.template.style.background="#cb2027"),mydStoreInfo.messages.template.style.opacity="1",mydStoreInfo.messages.template.style.visibility="visible",setTimeout((()=>{mydStoreInfo.messages.template.style.opacity="0",mydStoreInfo.messages.template.style.visibility="hidden"}),3e3)}getProduct(e=0){if(!e)return;const t=document.querySelector("#popup-"+e+" .fmd-item-qty").value,n=document.querySelector("#myd-product-note-"+e).value,o=document.querySelectorAll("#popup-"+e+" .option_prod_exta:checked");return{price:0,formated_price:"",quantity:parseInt(t),id:parseInt(e),note:n,extras:this.getProductExtra(o)}}getProductExtra(e){const t={total:0,groups:[]};if(e.length<=0)return t;const n=[];return e.forEach((e=>{const t={group:e.dataset.type,items:[],total:0};n.map((e=>e.group)).includes(e.dataset.type)||n.push(t)})),this.getProductExtraOptions(e,n),t.groups=n,t}getProductExtraOptions(e,t){return e.forEach((e=>{const n=t.map((e=>e.group)).indexOf(e.dataset.type),o={name:e.dataset.name,price:parseFloat(e.dataset.price),quantity:1,total:0};t[n].items.push(o)})),t}validateInputs(e){let t="";if("payment"===e)return"payment-integration"===window.MydOrder.payment.type||document.querySelector(".myd-cart__payment-input-option:checked")||!1;t="checkout"===e?document.querySelectorAll(".myd-cart__checkout input, .myd-cart__checkout select"):document.querySelectorAll(".myd-cart__payment input, .myd-cart__payment select");for(let e=0;e<t.length;e++)if(t[e].hasAttribute("required")&&""===t[e].value)return t[e].focus(),!1}setProductChangeQuantity(){const e=document.querySelectorAll(".fdm-click-plus"),t=document.querySelectorAll(".fdm-click-minus");e&&t&&(e.forEach((e=>{e.addEventListener("click",(()=>{this.changeProductInputQuantity("increase",e)}))})),t.forEach((e=>{e.addEventListener("click",(()=>{this.changeProductInputQuantity("decrease",e)}))})))}changeProductInputQuantity(e=null,t=null){if(!e||!t)return;const n=t.parentElement.querySelector(".fmd-item-qty");if(!n)return;let o=parseInt(n.value);if("decrease"===e){o--;const e=parseInt(n.min);return o<e&&(o=e),void(n.value=o)}o++,n.value=o}scroolToElement(e=null){e&&e.scrollIntoView({behavior:"smooth",block:"start"})}setCategoryTagsFilter(){const e=document.querySelectorAll(".myd-content-filter__tag");e&&e.forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(".myd-content-filter__tag--active");t&&t.classList.remove("myd-content-filter__tag--active"),e.classList.add("myd-content-filter__tag--active");const n=document.getElementById(`fdm-${e.dataset.anchor}`);n&&this.scroolToElement(n)}))}))}},window.MydCart=new class{constructor(){this.items=[],this.total=0,this.formatedPrice="",this.itemsQuantity=0,this.cartTemplate=null,this.getStoredCart()}get(){return{items:this.items,itemsQuantity:this.itemsQuantity,total:this.total,formatedPrice:this.formatedPrice}}getStoredCart(){let e=sessionStorage.getItem("mydCart");if(!e)return this.saveStoredCart(),!1;e=JSON.parse(e),this.items=e.items,this.total=e.total,this.formatedPrice=e.formatedPrice,this.itemsQuantity=e.itemsQuantity,this.cartTemplate=e.cartTemplate,this.setFLoatCart(),this.setItemsToCheckout(),window.Myd.newEvent("MydCartUpdated")}saveStoredCart(){sessionStorage.setItem("mydCart",JSON.stringify({items:this.items,total:this.total,formatedPrice:this.formatedPrice,itemsQuantity:this.itemsQuantity,cartTemplate:this.cartTemplate}))}clear(){sessionStorage.setItem("mydCart","")}addItem(t=0){return e(this,null,(function*(){if(!t)return;if(!1===this.checkRequiredExtra(t))return;if(!1===this.checkMinLimit(t))return;if(!1===this.checkStoreTime())return;window.Myd.addLoadingAnimation(".fdm-popup-product-init:not(.myd-hide-element) .fdm-add-to-cart-popup");const e=window.Myd.getProduct(t);this.items.push(e);const n=yield this.updateCart();if(window.Myd.removeLoadingAnimation(".fdm-popup-product-init:not(.myd-hide-element) .fdm-add-to-cart-popup"),n)return window.Myd.hideProductPopup(),window.Myd.resetAllProcuctExtraCheckbox(),window.Myd.resetAllProductSelectQty(),window.Myd.notificationBar("success",mydStoreInfo.messages.addToCard),void window.Myd.newEvent("MydAddedToCart",{product:this.items[this.items.length-1]});console.error("error to add product"),window.Myd.notificationBar("error",mydStoreInfo.messages.removedFromCart)}))}removeItem(t){return e(this,null,(function*(){this.items=this.items.filter(((e,n)=>parseInt(t)!==n)),(yield this.updateCart())?window.Myd.notificationBar("success",mydStoreInfo.messages.removedFromCart):window.Myd.notificationBar("error",mydStoreInfo.messages.removedFromCart)}))}updateCart(){return e(this,null,(function*(){const e=encodeURIComponent(JSON.stringify({items:this.items,total:this.total,formatedPrice:this.formatedPrice,itemsQuantity:this.itemsQuantity}));try{const t=yield fetch(ajax_object.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:"action=myd_update_cart&data="+e+"&sec="+ajax_object.order_nonce});if(!t.ok)throw new Error(t.status);const n=yield t.json();return this.items=n.cart.items||[],this.total=n.cart.total||0,this.formatedPrice=n.cart.formated_price||"",this.itemsQuantity=n.cart.items_quantity||0,this.cartTemplate=n.template||null,this.saveStoredCart(),this.setFLoatCart(),this.setItemsToCheckout(),window.Myd.newEvent("MydCartUpdated"),!0}catch(e){return console.log("Problem with your fetch request: "+e.message),!1}}))}setFLoatCart(){const e=document.getElementById("myd-float__qty"),t=document.getElementById("myd-float__price");e&&t&&(e.innerText=this.itemsQuantity,t.innerText=this.formatedPrice?this.formatedPrice:t.dataset.currency)}setItemsToCheckout(){const e=document.querySelector(".myd-cart__products"),t=document.querySelector(".myd-cart__products-empty");if(e&&t)if(e.innerHTML="",e.insertAdjacentHTML("beforeend",this.cartTemplate),this.items.length){const t=document.querySelector(".myd-cart__content--active");t&&t.classList.remove("myd-cart__content--active");const n=document.querySelector(".myd-cart__nav--active");n&&n.classList.remove("myd-cart__nav--active");const o=document.querySelector(".myd-cart__nav-bag");o&&o.classList.add("myd-cart__nav--active"),e.classList.add("myd-cart__content--active")}else t.classList.add("myd-cart__content--active"),e.classList.remove("myd-cart__content--active")}checkRequiredExtra(e){let t=document.getElementById("popup-"+e),n=[];if(t.querySelectorAll(".fdm-extra-option-title").forEach((e=>{"required"==e.dataset.obj&&0==e.querySelectorAll("input[type=checkbox]:checked").length&&n.push("stop")})),n.includes("stop"))return window.Myd.notificationBar("error",mydStoreInfo.messages.extraRequired),!1}checkMinLimit(e){const t=[],n=document.getElementById("popup-"+e);if(!n)return;const o=n.querySelectorAll(".fdm-extra-option-title");return o.length<1?void 0:(o.forEach((e=>{e.dataset.min&&e.dataset.min>0&&e.querySelectorAll(".option_prod_exta:checked").length<e.dataset.min&&t.length<=0&&(t.push("true"),window.Myd.notificationBar("error",mydStoreInfo.messages.extraMin))})),t.length<=0)}checkStoreTime(){if("forceStore"in mydStoreInfo){if("open"===mydStoreInfo.forceStore)return!0;if("close"===mydStoreInfo.forceStore)return window.Myd.notificationBar("error",mydStoreInfo.messages.storeClosed),!1}const e=mydStoreInfo.deliveryTime,t=[],n=Date.parse("01/01/2011 "+(new Date).toLocaleTimeString("en-US"));return Object.keys(e).forEach((o=>{const r=Date.parse("01/01/2011 "+e[o].start+":00"),i=Date.parse("01/01/2011 "+e[o].end+":00");n>=r&&n<=i&&t.push(!0)})),!!t.includes(!0)||(window.Myd.notificationBar("error",mydStoreInfo.messages.storeClosed),!1)}checkMinimumPurchase(){const e=mydStoreInfo.minimumPurchase;if(parseInt(this.total)<parseInt(e))return window.Myd.notificationBar("error",mydStoreInfo.messages.minimumPrice+" "+mydStoreInfo.currency.symbol+" "+mydStoreInfo.minimumPurchase),!1}},window.MydOrder=new class{constructor(){this.id=null,this.type=null,this.subtotal=0,this.total=0,this.cart=null,this.payment=new t,this.customer=new i,this.shipping=new r,this.coupon=new d,this.init()}init(){if("loading"!==document.readyState){if("interactive"===document.readyState||"complete"===document.readyState){const e=document.querySelector(".myd-cart__checkout-option.myd-cart__checkout-option--active");e&&(this.type=e.dataset.type)}}else window.addEventListener("DOMContentLoaded",this.init.bind(this))}update(){this.cart=window.MydCart.get()}get(){return{id:this.id,type:this.type,subtotal:this.subtotal,total:this.total,cart:this.cart,payment:this.payment,customer:this.customer,shipping:this.shipping,coupon:this.coupon}}createDraft(){return a(this,null,(function*(){const e=encodeURIComponent(JSON.stringify(this.get()));try{const t=yield fetch(ajax_object.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:`action=myd_create_draft_order&data=${e}&sec=${ajax_object.order_nonce}`});if(!t.ok)throw window.Myd.removeLoadingAnimation(".myd-cart__button-text"),window.Myd.notificationBar("error","Error to make the fetch request. Contact the store support."),new Error(t.status);const n=yield t.json();if(n.error)throw window.Myd.removeLoadingAnimation(".myd-cart__button-text"),window.Myd.notificationBar("error",n.error.error_message),new Error(n.error.error_message);return(null==n?void 0:n.data)&&this.updateProprieties(null==n?void 0:n.data),(null==n?void 0:n.template)&&window.MydCheckout.updateTotalSummaryTemplate(n.template),window.Myd.newEvent("MydDraftOrderCreated",{currentOrder:this.get(),data:n}),!0}catch(e){return console.log("Problem with your fetch request: "+e.message),!1}}))}placePayment(){return a(this,null,(function*(){const e=encodeURIComponent(JSON.stringify({id:this.id,payment:this.payment.get()}));try{const t=yield fetch(ajax_object.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:`action=myd_order_place_payment&data=${e}&sec=${ajax_object.order_nonce}`});if(!t.ok)throw window.Myd.removeLoadingAnimation(".myd-cart__button-text"),window.Myd.notificationBar("error","Error to make the fetch request. Contact the store support."),new Error(t.status);const n=yield t.json();if(n.error)throw window.Myd.removeLoadingAnimation(".myd-cart__button-text"),window.Myd.notificationBar("error",n.error.error_message),new Error(n.error.error_message);const o=document.getElementById("finished-order-number"),r=document.querySelector(".myd-cart__finished-whatsapp > a"),i=document.querySelector(".myd-cart__finished-track-order > a");return o.innerText=n.id,r.href=n.whatsappLink,i.href=n.orderTrackLink,window.MydOrder.clear(),window.MydCheckout.goTo("orderComplete"),window.MydCheckout.elements.nextButton.style.display="none",window.Myd.newEvent("MydOrderComplete",{orderTotal:this.total}),"yes"===mydStoreInfo.autoRedirect&&(window.location.href=n.whatsappLink),!0}catch(e){return console.log("Problem with your fetch request: "+e.message),!1}}))}updateProprieties(e){const t=["cart","payment","customer","shipping","coupon"];for(const n in e)e.hasOwnProperty(n)&&(t.includes(n)?Object.assign(this[n],e[n]):this[n]=e[n])}clear(){this.id=null,this.type=null,this.subtotal=0,this.total=0,this.cart=null,this.payment=new t,this.customer=new i,this.shipping=new r,this.coupon=new d,window.MydCart.clear()}},window.MydCheckout=new class{constructor(){this.inputs={name:null,phone:null,change:null,coupon:null,street:null,streetNumber:null,addressComplement:null,neighborhood:null,zipcode:null,table:null},this.screens={orderComplete:null,orderPayment:null},this.elements={nextButton:null,nextButtonText:null},this.init()}init(){"complete"!==document.readyState?(this.inputs={name:document.getElementById("input-customer-name"),phone:document.getElementById("input-customer-phone"),change:document.getElementById("input-payment-change"),couponCode:document.getElementById("input-coupon"),street:document.getElementById("input-delivery-street-name"),streetNumber:document.getElementById("input-delivery-address-number"),addressComplement:document.getElementById("input-delivery-comp"),neighborhood:document.getElementById("input-delivery-neighborhood"),zipcode:document.getElementById("input-delivery-zipcode"),table:document.getElementById("input-in-store-table")},this.fillCheckoutFromLocalStorage(),this.screens.orderComplete=document.getElementById("myd-cart-finished"),this.screens.orderPayment=document.getElementById("myd-cart-payment"),this.elements.nextButton=document.querySelector(".myd-cart__button"),this.elements.nextButtonText=document.querySelector(".myd-cart__button-text")):window.addEventListener("DOMContentLoaded",this.init.bind(this))}getFromLocalStorage(){return JSON.parse(localStorage.getItem("mydUserData"))||{}}saveOnLocalStorage(){const e={};Object.values(this.inputs).forEach((t=>{if(!t)return;const n="per-distance"===mydStoreInfo.deliveryShipping.method,o="input-delivery-neighborhood"===t.id&&!n;["input-payment","input-payment-change","input-coupon"].includes(t.id)||o||(e[t.id]=t.value)}));const t=Object.assign(this.getFromLocalStorage(),e);localStorage.setItem("mydUserData",JSON.stringify(t))}fillCheckoutFromLocalStorage(){const e=this.getFromLocalStorage();e&&Object.entries(e).forEach((e=>{const t=document.getElementById(e[0]);t&&(t.value=e[1])}))}updateTotalSummaryTemplate(e){if(!e)return;const t=document.getElementById("myd-cart-total-summary");t&&(t.innerHTML=e)}goTo(e=null){"orderComplete"===e&&this.screens.orderComplete&&this.screens.orderPayment&&(this.screens.orderComplete.classList.add("myd-cart__content--active"),this.screens.orderPayment.classList.remove("myd-cart__content--active"))}open(){document.querySelector(".myd-checkout").classList.toggle("myd-checkout--open"),document.body.classList.toggle("myd-cart-open")}},new class{constructor(){this.inputs=null,this.init()}init(){"complete"===document.readyState?(this.inputs=document.querySelectorAll("input[data-mask]"),this.inputs.forEach((e=>{e.addEventListener("input",this.maskInput.bind(this)),e.addEventListener("keydown",this.handleBackspace.bind(this))}))):window.addEventListener("load",this.init.bind(this))}maskInput(e){const t=e.target,n=t.dataset.mask,o=t.value.replace(/\D/g,""),r="true"===t.dataset.maskReverse,i=this.applyMask(o,n,r);t.value=i}handleBackspace(e){const t=e.target;if("Backspace"===e.key&&t.selectionStart===t.selectionEnd){const n=t.selectionStart;if(n>0){const o=t.value;/\d/.test(o[n-1])||(e.preventDefault(),t.value=o.slice(0,n-1)+o.slice(n),t.setSelectionRange(n-1,n-1))}}}applyMask(e,t,n){let o="",r=0,i=t.split("");n&&(e=e.split("").reverse().join(""),i=i.reverse());for(let t=0;t<i.length;t++)if("#"===i[t]){if(!(r<e.length))break;o+=e[r],r++}else o+=i[t];return n&&(o=o.split("").reverse().join(""),o=o.startsWith(".")?o.substring(1):o),o}},window.addEventListener("MydCartUpdated",(()=>{window.MydOrder.cart=window.MydCart.get()})),window.addEventListener("load",(()=>{if("undefined"!=typeof mydStoreInfo&&"per-distance"===mydStoreInfo.deliveryShipping.method){const e=mydStoreInfo.deliveryShipping.options.googleApi||!1;if(e.key){const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key="+e.key+"&callback=window.MydOrder.shipping.SetGoogleMapsApi&libraries=places&v=weekly&loading=async",t.async=!0,document.body.appendChild(t)}}}));const s=document.querySelector(".myd-cart__products");s&&s.addEventListener("click",(e=>{e.target.matches(".myd-cart__products-action")&&window.MydCart.removeItem(e.target.dataset.productKey)}));const c=document.querySelector(".myd-float");c&&c.addEventListener("click",window.MydCheckout.open),window.addEventListener("MydCheckoutPlaceOrder",(()=>{return void 0,null,e=function*(){!1!==window.Myd.validateInputs("checkout")?!1!==window.MydOrder.shipping.validateZipcodeShipping(window.MydOrder.type)?(window.MydCheckout.saveOnLocalStorage(),yield window.MydOrder.shipping.update(),window.MydOrder.customer.update(),window.MydOrder.coupon.update(),window.MydOrder.update(),window.Myd.addLoadingAnimation(".myd-cart__button-text"),window.MydOrder.createDraft()):window.Myd.notificationBar("error",mydStoreInfo.messages.deliveryAreaError):window.Myd.notificationBar("error",mydStoreInfo.messages.inputRequired)},new Promise(((t,n)=>{var o=t=>{try{i(e.next(t))}catch(e){n(e)}},r=t=>{try{i(e.throw(t))}catch(e){n(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);i((e=e.apply(undefined,null)).next())}));var e})),window.addEventListener("MydCheckoutPlacePayment",(()=>{window.MydOrder.payment.update(),window.Myd.addLoadingAnimation(".myd-cart__button-text"),window.MydOrder.placePayment()})),window.addEventListener("MydPaymentIntegrationSuccess",(e=>{const t=e.detail;window.MydOrder.payment.details=t.details,window.MydOrder.payment.method=t.method,window.Myd.newEvent("MydCheckoutPlacePayment",{})})),window.addEventListener("MydPaymentIntegrationSumUpValidated",(e=>{const t=e.detail;window.MydOrder.payment.details=t.details,window.MydOrder.payment.method=t.method,window.MydOrder.payment.type="payment-integration",window.MydOrder.id=t.orderId,window.MydCheckout.open();const n=document.querySelector(".myd-cart__content--active");n&&n.classList.remove("myd-cart__content--active");const o=document.querySelector(".myd-cart__nav--active");o&&o.classList.remove("myd-cart__nav--active");const r=document.querySelector(".myd-cart__nav-payment");r&&r.classList.add("myd-cart__nav--active");const i=document.getElementById("myd-cart-payment");i&&i.classList.add("myd-cart__content--active"),window.Myd.newEvent("MydCheckoutPlacePayment",{})})),window.addEventListener("load",(()=>{!function(){const e=document.getElementById("input-delivery-zipcode");e&&"true"===e.dataset.autocomplete&&e.addEventListener("blur",(()=>{const t=e.value.replace(/\D/g,"");if(""!==t)if(/^[0-9]{8}$/.test(t)){const e=document.getElementById("input-delivery-street-name");e&&(e.valeu="..."),fetch(`//viacep.com.br/ws/${t}/json/`).then((e=>e.json())).then((e=>{"erro"in e||(""!==e.logradouro?(document.getElementById("input-delivery-street-name").value=e.logradouro,document.getElementById("input-delivery-street-name").style.background="#efefef",document.getElementById("input-delivery-address-number").focus()):document.getElementById("input-delivery-street-name").value="",""!==e.logradouro&&(document.getElementById("input-delivery-neighborhood").value=e.bairro))}))}else limpa_formulario_cep()}))}()}))})()})();