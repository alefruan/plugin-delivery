(()=>{const e=document.querySelectorAll(".myd-repeater-summary__action--remove");e.length>0&&e.forEach((e=>{e.addEventListener("click",l)}));const t=document.querySelectorAll(".myd-repeater-container__remove");t.length>0&&t.forEach((e=>{e.addEventListener("click",a)}));const r=document.querySelectorAll(".myd-repeater-add-option");r.length>0&&r.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),o(e)}))}));const n=document.querySelectorAll(".myd-repeater-add-extra");function a(){if(this.parentNode.previousElementSibling||!this.parentNode.previousElementSibling&&!this.parentNode.nextElementSibling.matches("button"))this.parentNode.remove();else{const e=this.parentNode;if(e){let t=e.querySelector(".myd-repeater-summary__title");t&&(t.innerText="")}const t=e.querySelectorAll(".myd-repeater-input");t.length>0&&t.forEach((e=>{"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}))}}function l(){if(this.parentNode.parentNode.previousElementSibling.matches("details")||!this.parentNode.parentNode.previousElementSibling.matches("details")&&this.parentNode.parentNode.nextElementSibling.matches("details"))this.parentNode.parentNode.remove();else{const e=this.parentNode.parentNode;if(e){let t=e.querySelector(".myd-repeater-summary__title");t&&(t.innerText="")}const t=e.querySelectorAll(".myd-repeater-input");t.length>0&&t.forEach((e=>{"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}))}}function o(e){const t=e.parentNode.querySelector("details:last-of-type").cloneNode(!0);let r=t.querySelector(".myd-repeater-summary__title");r&&(r.innerText="");const n=t.querySelectorAll(".myd-repeater-input");n.length>0&&n.forEach((e=>{let t=e.dataset.mainIndex,r=e.dataset.name,n=e.dataset.internalIndex||"";if(t&&r){let a=Number(n)+1;r=r.replace(/{{main-index}}/,t),r=r.replace(/{{internal-index}}/,a),e.name=r,e.dataset.internalIndex=a,"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}}));const a=t.querySelector(".myd-repeater-summary__action--remove");a&&a.addEventListener("click",l),e.parentNode.insertBefore(t,e)}n.length>0&&n.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),function(e){const t=e.parentNode.querySelector(".myd-repeater-container--top-level:last-of-type").cloneNode(!0);let r=t.querySelectorAll("details.myd-repeater-container:not(:first-of-type)");r.length>0&&r.forEach((e=>{e.remove()}));let n=t.querySelector(".myd-repeater-summary__title");n&&(n.innerText="");const l=t.querySelectorAll(".myd-repeater-input");l.length>0&&l.forEach((e=>{let t=e.dataset.mainIndex,r=e.dataset.name,n=e.dataset.internalIndex||"";if(t&&r){let a=Number(t)+1;r=r.replace(/{{main-index}}/,a),r=r.replace(/{{internal-index}}/,n),e.name=r,e.dataset.mainIndex=a,"checkbox"!==e.type&&"hidden"!==e.type?e.value="":e.checked=!1}}));const d=t.querySelector(".myd-repeater-container__remove");d&&d.addEventListener("click",a);const c=t.querySelector(".myd-repeater-add-option");c&&c.addEventListener("click",(e=>{e.preventDefault(),o(c)})),e.parentNode.insertBefore(t,e)}(e)}))}))})();