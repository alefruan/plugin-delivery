(()=>{"use strict";new class{constructor(){this.inputs=null,this.init()}init(){"complete"===document.readyState?(this.inputs=document.querySelectorAll("input[data-mask]"),this.inputs.forEach((e=>{e.addEventListener("input",this.maskInput.bind(this)),e.addEventListener("keydown",this.handleBackspace.bind(this))}))):window.addEventListener("load",this.init.bind(this))}maskInput(e){const t=e.target,a=t.dataset.mask,n=t.value.replace(/\D/g,""),o="true"===t.dataset.maskReverse,s=this.applyMask(n,a,o);t.value=s}handleBackspace(e){const t=e.target;if("Backspace"===e.key&&t.selectionStart===t.selectionEnd){const a=t.selectionStart;if(a>0){const n=t.value;/\d/.test(n[a-1])||(e.preventDefault(),t.value=n.slice(0,a-1)+n.slice(a),t.setSelectionRange(a-1,a-1))}}}applyMask(e,t,a){let n="",o=0,s=t.split("");a&&(e=e.split("").reverse().join(""),s=s.reverse());for(let t=0;t<s.length;t++)if("#"===s[t]){if(!(o<e.length))break;n+=e[o],o++}else n+=s[t];return a&&(n=n.split("").reverse().join(""),n=n.startsWith(".")?n.substring(1):n),n}},window.MydAdmin={mydChangeTab:function(e){e.preventDefault();const t=document.querySelectorAll(".myd-tab"),a=document.querySelectorAll(".myd-tabs-content"),n=e.target;t.forEach((e=>{e.classList.remove("nav-tab-active")})),a.forEach((e=>{e.classList.remove("myd-tabs-content--active")})),n.classList.add("nav-tab-active"),document.getElementById(n.id+"-content").classList.add("myd-tabs-content--active")},mydRepeaterAddRow:function(e){e.preventDefault();const t=e.target.closest(".myd-repeater").querySelector(".myd-repeater__rows");let a=t.lastElementChild;const n=a.dataset.row,o="["+n+"]",s=parseInt(n)+parseInt(1);a.dataset.row=s,a=a.outerHTML.replaceAll(o,"["+s+"]"),t.insertAdjacentHTML("beforeend",a)},mydRepeaterRemoveRow:function(e){const t=e.target.closest(".myd-repeater__row");t.previousElementSibling&&t.remove()},mydRepeaterTableAddRow:function(e){e.preventDefault();const t=e.target.previousElementSibling,a=t.querySelector("tbody tr:last-child"),n=a.dataset.rowIndex,o=parseInt(n)+parseInt(1),s=a.dataset.rowFieldBase,d=a.cloneNode(!0);d.dataset.rowIndex=o,d.querySelectorAll("td input").forEach((e=>{e.dataset.dataIndex,e.name=s+"["+o+"]["+e.dataset.dataIndex+"]",e.id=s+"["+o+"]["+e.dataset.dataIndex+"]",e.value=""})),t.querySelector("tbody").appendChild(d)},mydRepeaterTableRemoveRow:function(e){const t=e.closest(".myd-options-table__row-content");t.previousElementSibling&&t.remove()},mydSelectDeliveryPrice:function(e){const t=document.querySelectorAll(".myd-delivery-type-content");switch(e.value){case"select":t.forEach((e=>{e.classList.remove("myd-tabs-content--active")}));break;case"fixed-per-cep":case"fixed-per-neighborhood":case"per-cep-range":case"per-neighborhood":case"per-distance":t.forEach((e=>{e.classList.remove("myd-tabs-content--active")})),document.getElementById("myd-delivery-"+e.value).classList.add("myd-tabs-content--active")}},initPriceByDistance:s};const e=document.getElementById("report-range-from"),t=document.getElementById("report-range-to"),a=document.getElementById("report-range-submit");function n(e){let t=e.dataset.url;t=t.replace("{from}",e.dataset.from),t=t.replace("{to}",e.dataset.to),e.href=t}function o(){let e=-29.973801490981817,t=-51.194747429309174;const a=document.getElementsByName("myd-shipping-distance-address-latitude"),n=document.getElementsByName("myd-shipping-distance-address-longitude");a&&n&&(e=Number(a[0].value)||e,t=Number(n[0].value)||t);const o=new google.maps.Map(document.getElementById("myd-map"),{center:{lat:e,lng:t},zoom:16,mapTypeControl:!1}),s=new google.maps.Marker({position:{lat:e,lng:t},map:o}),d=document.getElementById("myd-search-address-autocomplete-input"),r={fields:["formatted_address","geometry"],strictBounds:!1,types:["address"]};"undefined"!=typeof mydSelectedCountryCode&&""!==mydSelectedCountryCode&&(r.componentRestrictions={country:mydSelectedCountryCode});const i=new google.maps.places.Autocomplete(d,r);i.bindTo("bounds",o);const c=new google.maps.Marker({map:o,anchorPoint:new google.maps.Point(0,-29)});i.addListener("place_changed",(()=>{c.setVisible(!1);const e=i.getPlace();if(!e.geometry||!e.geometry.location)return void window.alert("No details available for input: '"+e.name+"'");e.geometry.viewport?o.fitBounds(e.geometry.viewport):(o.setCenter(e.geometry.location),o.setZoom(16)),c.setPosition(e.geometry.location),s.setVisible(!1),c.setVisible(!0);const t=document.getElementsByName("myd-shipping-distance-formated-address");a&&n&&t&&(t[0].value=e.formatted_address,a[0].value=e.geometry.location.lat(),n[0].value=e.geometry.location.lng())}))}function s(){if(!0===window.mydMapLoaded)return;const e=document.getElementById("myd-shipping-distance-google-api-key");if(!e)return;const t=e.value;if(""===t)return;const a=document.getElementById("myd-search-address-autocomplete-input");a&&(a.disabled=!1);const n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key="+t+"&callback=initMap&libraries=places&v=weekly",n.defer=!0,n.async=!0,document.body.appendChild(n),window.mydMapLoaded=!0}e&&t&&a&&(e.addEventListener("change",(o=>{t.min=e.value,a.dataset.from=e.value,n(a)})),t.addEventListener("change",(e=>{a.dataset.to=t.value,n(a)}))),window.addEventListener("DOMContentLoaded",(()=>{window.initMap=o})),window.addEventListener("load",(()=>{s()})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("myd-custom-message-type"),t=document.querySelectorAll(".myd-template-order-custom-message");!e&&t.length<=0||e.addEventListener("change",(()=>{t.forEach((t=>{t.id==="myd-template-order-custom-message-"+e.value?t.classList.remove("myd-admin-hidden"):t.classList.add("myd-admin-hidden")}))}))}))})();